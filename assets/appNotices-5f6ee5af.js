import{a as f,o as S,c as r,T as A,d as m,L as v,S as b,C as w,p as L,n as i,g as x}from"./index-7285a1df.js";import{g as D,F as I}from"./fetchWrap-634f8918.js";import{B as F}from"./link-55fb6aa8.js";import{T as M,A as N}from"./appLogos-6e54668c.js";import{N as p,B as C,g as P,A as d,a as u}from"./baseCrudService-b6b97e54.js";import{D as T,M as y,G as s}from"./manageResourceBasePage-e9a043f6.js";import{P as _,a as z}from"./platformTypeDropdown-ac434962.js";import{s as O,i as E,c as U}from"./commonMapping-0d263e30.js";import{T as B,F as G}from"./image-e69e193b.js";import{F as g}from"./input-67a0efba.js";import{c as R}from"./stringHelper-1c926dc7.js";import"./manageAppService-ef04ec82.js";import"./image-ebeb0859.js";import"./popupHelper-5405ca87.js";import"./enumHelper-aebeeebb.js";const V=e=>{const[n,t]=f(e.appsFromApi??[]),[a,l]=f(e.appsFromApi!=null?p.Success:p.Loading);S(()=>{e.appsFromApi!=null&&e.appsFromApi.length>0||c()});const c=async()=>{const o=await D().readAllCached();o.isSuccess==!1&&l(p.Error),t(o.value),l(p.Success)};return[r(m,{get when(){return a()==p.Error},get children(){return r(A,{children:"Something went wrong"})}}),r(m,{get when(){return a()==p.Loading||a()==p.Pending},get children(){return r(v,{})}}),r(m,{get when(){return a()==p.Success},get children(){return r(T,{get title(){return e.multiple==!0?"Selected Languages":"Selected Language"},get multiple(){return e.multiple},get onSelect(){return e.onChange},get placeholder(){return e.placeholder},get selectedValues(){return e.value},get options(){return n().map(o=>({title:o.name,value:o.languageCode}))}})}})]};var W=Object.defineProperty,j=Object.getOwnPropertyDescriptor,$=(e,n,t,a)=>{for(var l=a>1?void 0:a?j(n,t):n,c=e.length-1,o;c>=0;c--)(o=e[c])&&(l=(a?o(n,t,l):o(l))||l);return a&&l&&W(n,t,l),l};let h=class extends C{constructor(){const e=P();super(e.getAssistantAppsUrl())}create(e){return this.post(d.appNotice,e,u)}read(e){throw new Error("AppManageService: Method not implemented.")}readAll(e){return this.get(`${d.appNotice}/Admin`,u)}update(e){return this.put(d.appNotice,e,u)}del(e){const n=`${d.appNotice}/${e.guid}`;return this.delete(n,u)}};h=$([b()],h);const H=()=>w.get(h),ie=()=>r(I,{fetchApps:!0,fetchLanguages:!0,render:(e,n)=>r(y,{title:"Manage AppNotices",itemName:"App Notice",disableGetByIdOption:!0,get crudService(){return H()},get defaultItem(){return{date:L(new Date),sortOrder:0,isVisible:!1}},tableHeadItems:[{title:"Apps"},{title:"Name"},{title:"Subtitle"},{title:"Icon",maxWidth:"75px",textAlign:"center"},{title:"Link",textAlign:"center"},{title:"Platforms"},{title:"Language Code"},{title:"End Date"},{title:"Sort Order"},{title:"Is Visible"}],tableRowRender:t=>[r(M,{maxWidth:"75px",get selectedApps(){return[t.appGuid]},appsFromApi:e}),r(i,{get children(){return t.name}}),r(i,{get children(){return t.subtitle}}),r(B,{get url(){return t.iconUrl},showTooltip:!0,maxWidth:"75px",margin:"0 auto"}),r(i,{textAlign:"center",get children(){return r(F,{get href(){return t.externalUrl},children:"🔗"})}}),r(i,{get children(){return r(A,{class:"clamp-to-2-lines",get children(){return t.platforms.map(a=>R(_[a])).join(", ")}})}}),r(i,{get children(){return t.languageCode}}),r(i,{maxWidth:"75px",margin:"0 auto",textAlign:"center",get children(){return x(t.endDate)}}),r(i,{get children(){return t.sortOrder}}),r(i,{get children(){return t.isVisible?"✔":"❌"}})],get propToFormMappings(){return[{component:N,gridItemSize:s.medium,property:"appGuid",label:"App",placeholder:"Select an app",additional:[{prop:"multiple",value:t=>!1},{prop:"appsFromApi",value:t=>e}]},{component:V,gridItemSize:s.medium,property:"languageCode",label:"Language Code",placeholder:"Please select a language",additional:[{prop:"multiple",value:t=>!1},{prop:"langsFromApi",value:t=>n}]},{component:z,gridItemSize:s.medium,property:"platforms",label:"Platforms",placeholder:"Please select a platform",additional:[{prop:"multiple",value:t=>!0}]},{component:g,gridItemSize:s.medium,property:"name",label:"Name",placeholder:"Event name"},{component:g,gridItemSize:s.medium,property:"subtitle",label:"Subtitle",placeholder:"Event description"},{component:G,gridItemSize:s.medium,property:"iconUrl",label:"Icon Url",placeholder:"https://cdn.assistantapps..."},{component:g,gridItemSize:s.medium,property:"externalUrl",label:"External Url",placeholder:"https://"},{component:g,gridItemSize:s.medium,property:"endDate",label:"Date",placeholder:"2023-03-22",additional:[{prop:"inputType",value:t=>"datetime-local"}]},O,E,U]}})});export{ie as ManageAppNoticesPage,ie as default};
