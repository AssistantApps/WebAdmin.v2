import{S as A,C as P,a as g,o as b,c as e,P as N,B as w,e as f,L as O,d as o,V as j,H as v,F as S,T as u,j as M,O as L}from"./index-73a8a3eb.js";import{a as k,N as l,C as y}from"./assistantAppsApiService-be80e611.js";var B=Object.defineProperty,D=Object.getOwnPropertyDescriptor,F=(r,a,c,s)=>{for(var t=s>1?void 0:s?D(a,c):a,i=r.length-1,h;i>=0;i--)(h=r[i])&&(t=(s?h(a,c,t):h(t))||t);return s&&t&&B(a,c,t),t};let C=class{_controller;constructor(){this._controller=()=>k().getAuthedApi().cache}getInMemoryCacheItems(){return this._controller().readAllCache()}delInMemoryCacheItem(r){return this._controller().delCache(r)}getRedisCacheItems(){return this._controller().readAllRedisCache()}delRedisCacheItem(r){return this._controller().delRedisCache(r)}};C=F([A()],C);const m=()=>P.get(C),E=()=>{const[r,a]=g([]),[c,s]=g([]),[t,i]=g(l.Loading);b(()=>{h()});const h=async()=>{await Promise.all([d(),_()]),i(l.Success)},d=async()=>{const n=await m().getInMemoryCacheItems();a(n.value)},R=async n=>{await m().delInMemoryCacheItem(n),d()},_=async()=>{const n=await m().getRedisCacheItems();s(n.value)},x=async n=>{await m().delRedisCacheItem(n),d()},I=n=>p=>e(w,{class:"perm-item noselect pointer",onClick:()=>n(p),get children(){return e(y,{get children(){return[p," ",e(u,{display:"inline",children:"❌"})]}})}});return[e(N,{text:"Manage ServerCache"}),e(w,{m:50}),e(o,{get when(){return t()==l.Loading||t()==l.Pending},get children(){return e(f,{height:"25vh",get children(){return e(O,{})}})}}),e(o,{get when(){return t()==l.Error},get children(){return e(f,{children:"Error"})}}),e(o,{get when(){return t()==l.Success},get children(){return e(y,{class:"section-read-all",get children(){return e(j,{get children(){return[e(v,{size:"xl",mb:"1em",children:"In Memory Cache items"}),e(S,{gap:"0.5em",mb:"1em",flexWrap:"wrap",get children(){return e(o,{get when(){return r().length>0},get fallback(){return e(u,{mt:"1em",children:"No Items"})},get children(){return e(M,{get each(){return r()},get children(){return I(R)}})}})}}),e(L,{my:"1em"}),e(v,{size:"xl",mt:"1em",mb:"1em",children:"Redis Cache items"}),e(S,{gap:"0.5em",mb:"1em",flexWrap:"wrap",justifyContent:"center",get children(){return e(o,{get when(){return c().length>0},get fallback(){return e(u,{mt:"1em",children:"No Items"})},get children(){return e(M,{get each(){return c()},get children(){return I(x)}})}})}})]}})}})}})]};export{E as ManageServerCachePage,E as default};
