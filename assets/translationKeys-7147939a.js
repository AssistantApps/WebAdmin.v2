import{a as T,q as w,c as e,M as C,s as I,v as k,w as K,x as v,d as p,e as y,L as F,T as m,j as L,B as A,I as G,y as h,z as O,D as E,n as c,H as R}from"./index-6872b4a1.js";import{N as i,g as N,C as P}from"./assistantAppsApiService-0db6cc5b.js";import{a as S,b as z,F as B}from"./fetchWrap-44fb2fa3.js";import{T as H,A as D}from"./appLogos-ff1f6f1a.js";import{s as W,a as $,c as q}from"./commonMapping-fac65af4.js";import{M as U,G as g,c as j}from"./manageResourceBasePage-17b47d36.js";import{a as M}from"./image-f8a9b4e8.js";import{F as x,a as V}from"./input-53cdf861.js";import"./manageAppService-80a8cbb2.js";import"./image-ebeb0859.js";import"./popupHelper-52c515eb.js";const X=a=>{const[o,n]=T(i.Loading),[d,t]=T([]);w(()=>{a.translationKeyGuid!=null&&l(a.translationKeyGuid)});const l=async r=>{if(r==null||r.length<5){t([]);return}n(i.Loading);const u=await S().readAll(r);if(u.isSuccess==!1){n(i.Error);return}t(u.value),n(i.Success)},s=r=>async()=>{n(i.Loading),await S().del(r),l(a.translationKeyGuid)},b=async r=>{n(i.Loading);const u=S();for(const f of r??[])await u.add(a.translationKeyGuid,f.contents);l(a.translationKeyGuid)};return e(E,{get opened(){return a.isOpen},size:"xl",get onClose(){return a.onClose},get children(){return[e(C,{}),e(I,{get children(){return[e(k,{}),e(K,{get children(){return a.title}}),e(v,{get children(){return[e(p,{get when(){return o()==i.Loading||o()==i.Pending},get children(){return e(y,{height:"25vh",get children(){return e(F,{})}})}}),e(p,{get when(){return o()==i.Error},get children(){return e(y,{children:"Error"})}}),e(p,{get when(){return o()==i.Success},get children(){return[e(y,{minH:"25vh",gap:"0.5em",get children(){return e(p,{get when(){return d().length>0},get fallback(){return e(m,{children:"No images"})},get children(){return e(L,{get each(){return d()},children:r=>e(A,{position:"relative",maxW:"200px",maxH:"200px",get children(){return[e(G,{borderRadius:"10px",get src(){return`${N().getAATranslationImageUrl()}/${r.imagePath}`}}),e(h,{colorScheme:"danger",class:"top-right-cross",get onClick(){return s(r)},children:"X"})]}})})}})}}),e(M,{id:"image-upload",label:"Add image to translationKey",value:[],placeholder:"Paste image here",onChange:b})]}})]}}),e(O,{get children(){return e(h,{get onClick(){return a.onClose},children:"Close"})}})]}})]}})},_=(a,o)=>{const n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(o)),n.setAttribute("download",a),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},le=()=>{const[a,o]=T(),n=d=>{let t=`enum LocaleKey {
`;for(const s of d)t+=`	${s.key},
`;const l=["inputTooShort","inputTooLong","emailNotValid","inputTooLow","inputTooHigh","guideName","guideSubTitle","guideMinutes","guideTags","showCreatedBy","guideSectionHeading","guideSectionsAdd","guideSectionAddText","guideSectionAddLink","guideSectionAddLinkName","guideSectionAddLinkAddress","guideSectionAddImage","guideSectionAddImageCaption","guideSectionAddMarkdown","guideSectionAddMarkdownContent","guideSectionAddMarkdownPreview","guideSectionMoveUp","guideSectionMoveDown","guideSubmissionFailedTitle","guideSubmissionFailedMessage","guideSubmissionSuccessTitle","guideSubmissionSuccessMessage","loginRequiredTitle","loginRequiredMessage"];t+=`	//
`;for(const s of l)t+=`	${s},
`;return t+="}",t};return e(B,{fetchApps:!0,render:d=>[e(U,{title:"Manage TranslationKeys",itemName:"Translation Key",disableGetByIdOption:!0,get crudService(){return z()},defaultItem:{sortOrder:0,isTranslatable:!1},searchTooltip:"Searches: key & meta & originalText",setSortOrderOnItemLoad:!0,searchFunc:(t,l)=>t.key.includes(l)||t.meta.includes(l)||t.original.includes(l),tableHeadItems:[{title:"Key",width:"15%"},{title:"App Types"},{title:"Meta"},{title:"Original"},{title:"Sort Order",maxWidth:"75px",textAlign:"center"},{title:"Is Translatable",maxWidth:"75px",textAlign:"center"}],tableRowRender:t=>[e(c,{width:"15%",get children(){return e(m,{class:"clamp-to-1-lines",get children(){return t.key}})}}),e(H,{minWidth:"128px",get selectedApps(){return t.appGuids},appsFromApi:d}),e(c,{width:"20%",get children(){return e(m,{class:"clamp-to-2-lines",get children(){return t.meta}})}}),e(c,{width:"40%",get children(){return e(m,{class:"clamp-to-2-lines",get children(){return t.original}})}}),e(c,{maxWidth:"75px",margin:"0 auto",textAlign:"center",get children(){return t.sortOrder}}),e(c,{maxWidth:"75px",margin:"0 auto",textAlign:"center",get children(){return t.isTranslatable?"✔":"❌"}})],actionsPerRow:[{emoji:"🖼️",order:6,label:"Manage images",onClick:t=>{o(t.guid)}}],get propToFormMappings(){return[{component:x,gridItemSize:g.long,property:"key",label:"Key",placeholder:"Key"},{component:D,gridItemSize:g.long,property:"appGuids",label:"App Types",placeholder:"Please select an app",additional:[{prop:"appsFromApi",value:()=>d},{prop:"multiple",value:()=>!0},{prop:"preSelectedApps",value:t=>t.appGuids}]},{component:x,gridItemSize:g.xlong,property:"meta",label:"Meta",placeholder:"Description about the item"},{component:V,gridItemSize:g.medium,property:"original",label:"Original",placeholder:"English translation"},W,$,q,{component:M,gridItemSize:g.xlong,property:"translationKeyImages",label:"Screenshot",placeholder:"Paste image here"}]},renderExportCard:t=>e(P,{class:"section-export",get children(){return[e(R,{mb:"1.5em",children:"Export TranslationKey"}),e(h,{onClick:()=>j(n(t)),children:"Copy .dart export content"}),e(A,{m:"0.5em",display:"inline-block"}),e(h,{onClick:()=>_("locale_key.dart",n(t)),children:"Download .dart export"})]}})}),e(X,{title:"Manage images for translation key",get translationKeyGuid(){return a()??""},get isOpen(){return a()!=null},onClose:()=>o(void 0)})]})};export{le as ManageTranslationKeysPage,le as default};
