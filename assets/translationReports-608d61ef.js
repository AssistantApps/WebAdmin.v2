import{a as p,o as h,c as n,T as u,d as g,L as w,S,C as A,n as c,g as v,l as R}from"./index-ae4d2d82.js";import{g as f,F as M}from"./fetchWrap-0f4bea58.js";import{N as i,a as T}from"./assistantAppsApiService-cf1f901d.js";import{M as b,c as C}from"./manageResourceBasePage-75c842c6.js";import{c as _}from"./stringHelper-1c926dc7.js";import"./manageAppService-27809395.js";import"./popupHelper-8729fb25.js";const F=t=>{const[a,s]=p(t.langsFromApi??[]),[e,r]=p(t.langsFromApi!=null?i.Success:i.Loading);h(()=>{t.langsFromApi!=null&&t.langsFromApi.length>0||l()});const l=async()=>{const o=await f().readAllCached();o.isSuccess==!1&&r(i.Error),s(o.value),r(i.Success)};return[n(g,{get when(){return e()==i.Error},get children(){return n(u,{children:"Something went wrong"})}}),n(g,{get when(){return e()==i.Loading||e()==i.Pending},get children(){return n(w,{})}}),n(g,{get when(){return e()==i.Success},get children(){return n(u,{get children(){return(a()??[]).find(o=>o.guid==t.languageGuid)?.name??"unknown"}})}})]};var L=Object.defineProperty,x=Object.getOwnPropertyDescriptor,y=(t,a,s,e)=>{for(var r=e>1?void 0:e?x(a,s):a,l=t.length-1,o;l>=0;l--)(o=t[l])&&(r=(e?o(a,s,r):o(r))||r);return e&&r&&L(a,s,r),r};let m=class{_controller;constructor(){this._controller=()=>T().getAuthedApi().translationReport}async create(t){throw new Error("ManageTranslationReportService: Method not implemented.")}read(t){throw new Error("ManageTranslationReportService: Method not implemented.")}async readAll(t){return this._controller().readAll()}update(t){throw new Error("ManageTranslationReportService: Method not implemented.")}del(t){throw new Error("ManageTranslationReportService: Method not implemented.")}markAsResolved(t){return this._controller().resolve(t)}markAsClosed(t){return this._controller().close(t)}};m=y([S()],m);const d=()=>A.get(m),N=()=>n(M,{fetchApps:!0,fetchLanguages:!0,render:(t,a,s)=>n(b,{title:"Manage TranslationReports",itemName:"Translation Report",disableEditAction:!0,disableDeleteAction:!0,disableGetByIdOption:!0,get crudService(){return d()},tableHeadItems:[{title:"Language"},{title:"Date submitted",maxWidth:"75px",textAlign:"center"},{title:"Reason"},{title:"Status"}],tableRowRender:e=>[n(c,{get children(){return n(F,{get languageGuid(){return e.languageGuid},langsFromApi:a})}}),n(c,{maxWidth:"75px",margin:"0 auto",textAlign:"center",get children(){return v(e.dateSubmitted)}}),n(c,{get children(){return n(u,{class:"clamp-to-2-lines",get children(){return e.reason}})}}),n(c,{get children(){return _(R.TranslationReportStatus[e.status])}})],actionsPerRow:[{emoji:"📝",label:"Copy Translation Guid",order:3,onClick:e=>C(e.translationGuid)},{emoji:"❌",label:"Mark as closed (do nothing)",order:8,onClick:(e,r)=>d().markAsClosed(e.guid).then(r)},{emoji:"🗑️",label:"Resolve automatically (delete with all votes)",order:9,onClick:(e,r)=>d().markAsResolved(e.guid).then(r)}],propToFormMappings:[]})});export{N as ManageTranslationReportsPage,N as default};
