import{a as m,o as f,c as r,T as h,d as u,L as A,S,C as b,p as v,n as i,l as w,g as L}from"./index-fe3dcec9.js";import{g as D,F as I}from"./fetchWrap-493dd3f3.js";import{B as _}from"./link-da7171a3.js";import{T as x,A as F}from"./appLogos-300e717a.js";import{N as p,a as M}from"./assistantAppsApiService-a3e426c1.js";import{D as P,M as y,G as s}from"./manageResourceBasePage-c5ea24c4.js";import{P as C}from"./platformTypeDropdown-d5ed0c22.js";import{s as N,i as T,c as z}from"./commonMapping-1a11d33f.js";import{T as O,F as E}from"./image-cf22113c.js";import{F as d}from"./input-883e4ca8.js";import{c as U}from"./stringHelper-1c926dc7.js";import"./manageAppService-bf338c7c.js";import"./image-ebeb0859.js";import"./popupHelper-ee91c1da.js";import"./enumHelper-aebeeebb.js";const G=e=>{const[o,t]=m(e.appsFromApi??[]),[a,l]=m(e.appsFromApi!=null?p.Success:p.Loading);f(()=>{e.appsFromApi!=null&&e.appsFromApi.length>0||c()});const c=async()=>{const n=await D().readAllCached();n.isSuccess==!1&&l(p.Error),t(n.value),l(p.Success)};return[r(u,{get when(){return a()==p.Error},get children(){return r(h,{children:"Something went wrong"})}}),r(u,{get when(){return a()==p.Loading||a()==p.Pending},get children(){return r(A,{})}}),r(u,{get when(){return a()==p.Success},get children(){return r(P,{get title(){return e.multiple==!0?"Selected Languages":"Selected Language"},get multiple(){return e.multiple},get onSelect(){return e.onChange},get placeholder(){return e.placeholder},get selectedValues(){return e.value},get options(){return o().map(n=>({title:n.name,value:n.languageCode}))}})}})]};var R=Object.defineProperty,V=Object.getOwnPropertyDescriptor,B=(e,o,t,a)=>{for(var l=a>1?void 0:a?V(o,t):o,c=e.length-1,n;c>=0;c--)(n=e[c])&&(l=(a?n(o,t,l):n(l))||l);return a&&l&&R(o,t,l),l};let g=class{_controller;constructor(){this._controller=()=>M().getAuthedApi().appNotice}create(e){return this._controller().create(e)}read(e){throw new Error("AppManageService: Method not implemented.")}readAll(e){return this._controller().readAllForAdmin()}update(e){return this._controller().update(e)}del(e){return this._controller().del(e.guid)}};g=B([S()],g);const W=()=>b.get(g),le=()=>r(I,{fetchApps:!0,fetchLanguages:!0,render:(e,o)=>r(y,{title:"Manage AppNotices",itemName:"App Notice",disableGetByIdOption:!0,get crudService(){return W()},get defaultItem(){return{date:v(new Date),sortOrder:0,isVisible:!1}},tableHeadItems:[{title:"Apps"},{title:"Name"},{title:"Subtitle"},{title:"Icon",maxWidth:"75px",textAlign:"center"},{title:"Link",textAlign:"center"},{title:"Platforms"},{title:"Language Code"},{title:"End Date"},{title:"Sort Order"},{title:"Is Visible"}],tableRowRender:t=>[r(x,{maxWidth:"75px",get selectedApps(){return[t.appGuid]},appsFromApi:e}),r(i,{get children(){return t.name}}),r(i,{get children(){return t.subtitle}}),r(O,{get url(){return t.iconUrl},showTooltip:!0,maxWidth:"75px",margin:"0 auto"}),r(i,{textAlign:"center",get children(){return r(_,{get href(){return t.externalUrl},children:"🔗"})}}),r(i,{get children(){return r(h,{class:"clamp-to-2-lines",get children(){return t.platforms.map(a=>U(w.PlatformType[a])).join(", ")}})}}),r(i,{get children(){return t.languageCode}}),r(i,{maxWidth:"75px",margin:"0 auto",textAlign:"center",get children(){return L(t.endDate)}}),r(i,{get children(){return t.sortOrder}}),r(i,{get children(){return t.isVisible?"✔":"❌"}})],get propToFormMappings(){return[{component:F,gridItemSize:s.medium,property:"appGuid",label:"App",placeholder:"Select an app",additional:[{prop:"multiple",value:t=>!1},{prop:"appsFromApi",value:t=>e}]},{component:G,gridItemSize:s.medium,property:"languageCode",label:"Language Code",placeholder:"Please select a language",additional:[{prop:"multiple",value:t=>!1},{prop:"langsFromApi",value:t=>o}]},{component:C,gridItemSize:s.medium,property:"platforms",label:"Platforms",placeholder:"Please select a platform",additional:[{prop:"multiple",value:t=>!0}]},{component:d,gridItemSize:s.medium,property:"name",label:"Name",placeholder:"Event name"},{component:d,gridItemSize:s.medium,property:"subtitle",label:"Subtitle",placeholder:"Event description"},{component:E,gridItemSize:s.medium,property:"iconUrl",label:"Icon Url",placeholder:"https://cdn.assistantapps..."},{component:d,gridItemSize:s.medium,property:"externalUrl",label:"External Url",placeholder:"https://"},{component:d,gridItemSize:s.medium,property:"endDate",label:"Date",placeholder:"2023-03-22",additional:[{prop:"inputType",value:t=>"datetime-local"}]},N,T,z]}})});export{le as ManageAppNoticesPage,le as default};
