import{a as y,q as A,c as e,M as w,s as b,v as K,w as C,x as v,d as c,e as m,L as G,T as p,j as k,B as F,I as O,y as x,z as L,D as z,n as s}from"./index-749dd1b4.js";import{a as h,b as P,F as B}from"./fetchWrap-6d747562.js";import{T as R,A as W}from"./appLogos-69ea8a42.js";import{s as N,a as D,c as E}from"./commonMapping-79a7afa3.js";import{M as H,G as d}from"./manageResourceBasePage-24e44793.js";import{a as M}from"./image-218b1a6a.js";import{F as f,a as $}from"./input-2454b7d0.js";import{N as n,g as j}from"./baseCrudService-e1262d7f.js";import"./manageAppService-c7c2d748.js";import"./image-ebeb0859.js";import"./popupHelper-65454df4.js";const q=a=>{const[l,i]=y(n.Loading),[t,o]=y([]);A(()=>{a.translationKeyGuid!=null&&u(a.translationKeyGuid)});const u=async r=>{if(r==null||r.length<5){o([]);return}i(n.Loading);const g=await h().readAll(r);if(g.isSuccess==!1){i(n.Error);return}o(g.value),i(n.Success)},S=r=>async()=>{i(n.Loading),await h().del(r),u(a.translationKeyGuid)},I=async r=>{i(n.Loading);const g=h();for(const T of r??[])await g.add(a.translationKeyGuid,T.contents);u(a.translationKeyGuid)};return e(z,{get opened(){return a.isOpen},size:"xl",get onClose(){return a.onClose},get children(){return[e(w,{}),e(b,{get children(){return[e(K,{}),e(C,{get children(){return a.title}}),e(v,{get children(){return[e(c,{get when(){return l()==n.Loading||l()==n.Pending},get children(){return e(m,{height:"25vh",get children(){return e(G,{})}})}}),e(c,{get when(){return l()==n.Error},get children(){return e(m,{children:"Error"})}}),e(c,{get when(){return l()==n.Success},get children(){return[e(m,{minH:"25vh",gap:"0.5em",get children(){return e(c,{get when(){return t().length>0},get fallback(){return e(p,{children:"No images"})},get children(){return e(k,{get each(){return t()},children:r=>e(F,{position:"relative",maxW:"200px",maxH:"200px",get children(){return[e(O,{borderRadius:"10px",get src(){return`${j().getAATranslationImageUrl()}/${r.imagePath}`}}),e(x,{colorScheme:"danger",class:"top-right-cross",get onClick(){return S(r)},children:"X"})]}})})}})}}),e(M,{id:"image-upload",label:"Add image to translationKey",value:[],placeholder:"Paste image here",onChange:I})]}})]}}),e(L,{get children(){return e(x,{get onClick(){return a.onClose},children:"Close"})}})]}})]}})},re=()=>{const[a,l]=y();return e(B,{fetchApps:!0,render:i=>[e(H,{title:"Manage TranslationKeys",itemName:"Translation Key",disableGetByIdOption:!0,get crudService(){return P()},defaultItem:{sortOrder:0,isTranslatable:!1},searchTooltip:"Searches: key & meta & originalText",searchFunc:(t,o)=>t.key.includes(o)||t.meta.includes(o)||t.original.includes(o),tableHeadItems:[{title:"Key",width:"15%"},{title:"App Types",maxWidth:"75px"},{title:"Meta"},{title:"Original"},{title:"Sort Order",maxWidth:"75px",textAlign:"center"},{title:"Is Translatable",maxWidth:"75px",textAlign:"center"}],tableRowRender:t=>[e(s,{width:"15%",get children(){return e(p,{class:"clamp-to-1-lines",get children(){return t.key}})}}),e(R,{maxWidth:"75px",get selectedApps(){return t.appGuids},appsFromApi:i}),e(s,{width:"20%",get children(){return e(p,{class:"clamp-to-2-lines",get children(){return t.meta}})}}),e(s,{width:"40%",get children(){return e(p,{class:"clamp-to-2-lines",get children(){return t.original}})}}),e(s,{maxWidth:"75px",margin:"0 auto",textAlign:"center",get children(){return t.sortOrder}}),e(s,{maxWidth:"75px",margin:"0 auto",textAlign:"center",get children(){return t.isTranslatable?"✔":"❌"}})],actionsPerRow:[{emoji:"🖼️",order:6,label:"Manage images",onClick:t=>{l(t.guid)}}],get propToFormMappings(){return[{component:f,gridItemSize:d.long,property:"key",label:"Key",placeholder:"Key"},{component:W,gridItemSize:d.long,property:"appGuids",label:"App Types",placeholder:"Please select an app",additional:[{prop:"appsFromApi",value:()=>i},{prop:"multiple",value:()=>!0},{prop:"preSelectedApps",value:t=>t.appGuids}]},{component:f,gridItemSize:d.xlong,property:"meta",label:"Meta",placeholder:"Description about the item"},{component:$,gridItemSize:d.medium,property:"original",label:"Original",placeholder:"English translation"},N,D,E,{component:M,gridItemSize:d.xlong,property:"translationKeyImages",label:"Screenshot",placeholder:"Paste image here"}]}}),e(q,{title:"Manage images for translation key",get translationKeyGuid(){return a()??""},get isOpen(){return a()!=null},onClose:()=>l(void 0)})]})};export{re as ManageTranslationKeysPage,re as default};
