import{S as _,C as B,a as C,o as N,c as e,P as O,B as v,e as S,L as j,d as o,V as k,H as M,F as y,T as p,j as x,O as H}from"./index-2dc07de3.js";import{B as L,g as T,A as d,a as m,N as i,C as R}from"./baseCrudService-e05c90f3.js";var $=Object.defineProperty,D=Object.getOwnPropertyDescriptor,E=(r,a,s,c)=>{for(var t=c>1?void 0:c?D(a,s):a,h=r.length-1,l;h>=0;h--)(l=r[h])&&(t=(c?l(a,s,t):l(t))||t);return c&&t&&$(a,s,t),t};let I=class extends L{constructor(){const r=T();super(r.getAssistantAppsUrl())}getInMemoryCacheItems(){return this.get(d.cache,m)}delInMemoryCacheItem(r){return this.delete(`${d.cache}/${r}`,m)}getRedisCacheItems(){return this.get(d.redisCache,m)}delRedisCacheItem(r){return this.delete(`${d.redisCache}/${r}`,m)}};I=E([_()],I);const g=()=>B.get(I),V=()=>{const[r,a]=C([]),[s,c]=C([]),[t,h]=C(i.Loading);N(()=>{l()});const l=async()=>{await Promise.all([u(),P()]),h(i.Success)},u=async()=>{const n=await g().getInMemoryCacheItems();a(n.value)},A=async n=>{await g().delInMemoryCacheItem(n),u()},P=async()=>{const n=await g().getRedisCacheItems();c(n.value)},b=async n=>{await g().delRedisCacheItem(n),u()},f=n=>w=>e(v,{class:"perm-item noselect pointer",onClick:()=>n(w),get children(){return e(R,{get children(){return[w," ",e(p,{display:"inline",children:"❌"})]}})}});return[e(O,{text:"Manage ServerCache"}),e(v,{m:50}),e(o,{get when(){return t()==i.Loading||t()==i.Pending},get children(){return e(S,{height:"25vh",get children(){return e(j,{})}})}}),e(o,{get when(){return t()==i.Error},get children(){return e(S,{children:"Error"})}}),e(o,{get when(){return t()==i.Success},get children(){return e(R,{class:"section-read-all",get children(){return e(k,{get children(){return[e(M,{size:"xl",mb:"1em",children:"In Memory Cache items"}),e(y,{gap:"0.5em",mb:"1em",flexWrap:"wrap",get children(){return e(o,{get when(){return r().length>0},get fallback(){return e(p,{mt:"1em",children:"No Items"})},get children(){return e(x,{get each(){return r()},get children(){return f(A)}})}})}}),e(H,{my:"1em"}),e(M,{size:"xl",mt:"1em",mb:"1em",children:"Redis Cache items"}),e(y,{gap:"0.5em",mb:"1em",flexWrap:"wrap",justifyContent:"center",get children(){return e(o,{get when(){return s().length>0},get fallback(){return e(p,{mt:"1em",children:"No Items"})},get children(){return e(x,{get each(){return s()},get children(){return f(b)}})}})}})]}})}})}})]};export{V as ManageServerCachePage,V as default};
