import{c as e,F as m,e as p,T as A,f,g as D,A as I,l as s,u as R,h as F,a as l,o as H,P as L,B as c,b as N,d as g,V as d,i as M,j as v,H as o,k as j,m as z,r as B}from"./index-fca7416d.js";import{N as n,a as y,C as E}from"./assistantAppsApiService-0f362fab.js";import{e as V}from"./popupHelper-6ee52699.js";import{g as W}from"./managePermissionService-e6dd572b.js";const q=i=>{const u=r=>r==s.UserActivityActionType.create?"success":r==s.UserActivityActionType.read?"info":r==s.UserActivityActionType.update?"success":r==s.UserActivityActionType.delete?"warning":"danger",h=r=>r==s.UserActivityActionType.create?"âœ¨":r==s.UserActivityActionType.read?"ðŸ‘€":r==s.UserActivityActionType.update?"ðŸ“":r==s.UserActivityActionType.delete?"ðŸ”¥":"â“";return e(I,{get status(){return u(i.action)},width:"100%",my:"0.25em",get children(){return e(m,{width:"100%",get children(){return[e(p,{get children(){return h(i.action)}}),e(m,{flex:1,pl:"1em",get children(){return[e(A,{flex:1,get children(){return[f(()=>i.username)," - ",f(()=>i.description)]}}),e(A,{get children(){return D(i.actionDate)}})]}})]}})}})},K=()=>{const i=R(),u=F(),[h,r]=z(u),[a,w]=l(n.Loading),[S,U]=l([]),[x,P]=l([]);H(()=>{T()});const T=async()=>{await Promise.allSettled([C(),b(),k()]),w(n.Success)},C=async()=>{const t=await W().getCurrentUsersPermissions();return t.isSuccess==!1?V({title:"Permissions error",description:"There was an error fetching your permissions, please try logging in again",onConfirm:()=>i(B.login,{replace:!0})}):r(t.value),t},b=async()=>{const t=await y().getDashboardForAdmin();return t.isSuccess&&U(t.value),t},k=async()=>{const t=await y().getUserActivity();return t.isSuccess&&P(t.value),t};return[e(L,{text:"Dashboard"}),e(c,{m:50}),e(g,{get when(){return a()==n.Loading||a()==n.Pending},get children(){return e(N,{})}}),e(g,{get when(){return a()==n.Error},get children(){return e(p,{children:"Error"})}}),e(g,{get when(){return a()==n.Success},get children(){return e(d,{get children(){return[e(c,{class:"dashboard-tiles",width:"100%",get children(){return e(M,{minChildWidth:"300px",gap:"1em",get children(){return e(v,{get each(){return S()},children:t=>e(E,{class:"card-bg-20",get children(){return e(d,{get children(){return[e(o,{size:"2xl",get children(){return t.name}}),e(o,{size:"xl",fontWeight:"$light",get children(){return t.value}})]}})}})})}})}}),e(j,{mt:"2em",width:"100%",gap:"2em",alignItems:"start",get children(){return[e(c,{flex:1,get children(){return[e(o,{children:"User activity"}),e(d,{justifyContent:"start",get children(){return e(v,{get each(){return x()},children:t=>e(q,t)})}})]}}),e(c,{flex:1,get children(){return e(o,{children:"Reviews"})}})]}})]}})}})]};export{K as DashboardPage,K as default};
