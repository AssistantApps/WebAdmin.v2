import{c as e,F as m,e as P,T as f,f as w,g as H,A as L,u as N,h as M,a as g,o as j,P as z,B as u,b as B,d as o,V as d,i as E,j as S,H as c,k as V,l as W,r as q}from"./index-2dc07de3.js";import{N as a,C as G}from"./baseCrudService-e05c90f3.js";import{e as _}from"./popupHelper-54105d4a.js";import{g as x}from"./assistantAppsApiService-815a0903.js";import{g as $}from"./managePermissionService-d1127ba3.js";var s=(r=>(r[r.unknown=0]="unknown",r[r.create=1]="create",r[r.read=2]="read",r[r.update=3]="update",r[r.delete=4]="delete",r))(s||{});const J=r=>{const l=n=>n==s.create?"success":n==s.read?"info":n==s.update?"success":n==s.delete?"warning":"danger",h=n=>n==s.create?"âœ¨":n==s.read?"ðŸ‘€":n==s.update?"ðŸ“":n==s.delete?"ðŸ”¥":"â“";return e(L,{get status(){return l(r.action)},width:"100%",my:"0.25em",get children(){return e(m,{width:"100%",get children(){return[e(P,{get children(){return h(r.action)}}),e(m,{flex:1,pl:"1em",get children(){return[e(f,{flex:1,get children(){return[w(()=>r.username)," - ",w(()=>r.description)]}}),e(f,{get children(){return H(r.actionDate)}})]}})]}})}})},Z=()=>{const r=N(),l=M(),[h,n]=W(l),[i,C]=g(a.Loading),[k,v]=g([]),[b,D]=g([]);j(()=>{I()});const I=async()=>{await Promise.allSettled([p(),R(),F()]),C(a.Success)},p=async()=>{const t=await $().getCurrentUsersPermissions();return t.isSuccess==!1?_({title:"Permissions error",description:"There was an error fetching your permissions, please try logging in again",onConfirm:()=>r(q.login,{replace:!0})}):n(t.value),t},R=async()=>{const t=await x().getDashboardForAdmin();return t.isSuccess&&v(t.value),t},F=async()=>{const t=await x().getUserActivity();return t.isSuccess&&D(t.value),t};return[e(z,{text:"Dashboard"}),e(u,{m:50}),e(o,{get when(){return i()==a.Loading||i()==a.Pending},get children(){return e(B,{})}}),e(o,{get when(){return i()==a.Error},get children(){return e(P,{children:"Error"})}}),e(o,{get when(){return i()==a.Success},get children(){return e(d,{get children(){return[e(u,{class:"dashboard-tiles",width:"100%",get children(){return e(E,{minChildWidth:"300px",gap:"1em",get children(){return e(S,{get each(){return k()},children:t=>e(G,{class:"card-bg-20",get children(){return e(d,{get children(){return[e(c,{size:"2xl",get children(){return t.name}}),e(c,{size:"xl",fontWeight:"$light",get children(){return t.value}})]}})}})})}})}}),e(V,{mt:"2em",width:"100%",gap:"2em",alignItems:"start",get children(){return[e(u,{flex:1,get children(){return[e(c,{children:"User activity"}),e(d,{justifyContent:"start",get children(){return e(S,{get each(){return b()},children:t=>e(J,t)})}})]}}),e(u,{flex:1,get children(){return e(c,{children:"Reviews"})}})]}})]}})}})]};export{Z as DashboardPage,Z as default};
